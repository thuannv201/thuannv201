# Reverse proxy configuration for API services
# Uncomment and modify as needed

# upstream backend_api {
#     server backend:80;
#     # server backend2:80;
#     # server backend3:80;
# }

# server {
#     listen 80;
#     server_name api.localhost;

#     # API endpoints
#     location / {
#         proxy_pass http://backend_api;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         proxy_cache_bypass $http_upgrade;
        
#         # Timeouts
#         proxy_connect_timeout 30s;
#         proxy_send_timeout 30s;
#         proxy_read_timeout 30s;
        
#         # Rate limiting
#         limit_req zone=api burst=50 nodelay;
#     }

#     # WebSocket support
#     location /ws {
#         proxy_pass http://backend_api;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "upgrade";
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }

#     # Health check
#     location /health {
#         access_log off;
#         proxy_pass http://backend_api/health;
#     }
# }
